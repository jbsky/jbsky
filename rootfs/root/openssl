# 1/ on télécharge les scripts et le fichier de configuration.
wget https://raw.githubusercontent.com/jbsky/jbsky/master/ipfire/rootfs/etc/ssl/ipsec.cnf
wget https://raw.githubusercontent.com/jbsky/jbsky/master/ipfire/rootfs/etc/ssl/openssl.cnf
wget https://raw.githubusercontent.com/jbsky/jbsky/master/ipfire/rootfs/usr/local/sbin/caroot
wget https://raw.githubusercontent.com/jbsky/jbsky/master/ipfire/rootfs/usr/local/sbin/casec
wget https://raw.githubusercontent.com/jbsky/jbsky/master/ipfire/rootfs/usr/local/sbin/secsrv
wget https://raw.githubusercontent.com/jbsky/jbsky/master/ipfire/rootfs/usr/local/sbin/secacces

# 2/ on rend les scripts exécutables et on dispatche les fichiers au bon endroit. 
chmod +x {caroot,casec,secsrv,secacces}
mv {caroot,casec,secsrv,secacces} /usr/local/sbin
mv {openssl.cnf,ipsec.cnf} /etc/ssl/

# 3/ On génère le certificat d'autorité racine.
caroot

# 5/ On génère le certificat d'autorité ipsec.
casec

# 6/ On génère le certificat serveur ipsec signé par l'autorité ipsec.
secsrv

# 7/ On génère le certificat client ipsec signé par l'autorité ipsec.
secacc
